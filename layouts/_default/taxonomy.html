{{ define "title" -}}
{{ if eq .Data.Singular "author" -}}
  {{- $author := (index (.Site.Data.authors | default dict) .Title) -}}
  {{- $author_lang := (index ($author | default dict) .Site.Language.Lang) -}}
  {{- $author_name := $author_lang.name.display | default $author.name.display | default .Title -}}
  {{ $author_name }} · {{ .Site.Title }}
{{- else -}}
  {{ .Title }} · {{ .Site.Title }}
{{- end }}
{{- end }}

{{ define "content"}}
{{ $paginator := .Paginate (where .Data.Pages.ByDate.Reverse "Type" "post") (index .Site.Params "archive-paginate" | default 10) }}

{{ $title_block := "" }}
{{ $show_category_nav := false }}

{{ if not $paginator.HasPrev }}
  {{ if eq .Data.Plural "tags" }}
    {{ $title_block = printf `<div class="archive-title tag"><h2 class="archive-name">%s%s</h2></div>` (i18n "tag") .Title }}
  {{ else if eq .Data.Plural "categories" }}
    {{ $title_block = printf `<div class="archive-title category"><h2 class="archive-name">%s%s</h2></div>` (i18n "category") .Title }}
    {{ $show_category_nav = true }}
  {{ else if eq .Data.Singular "author" }}
    {{- $author := (index (.Site.Data.authors | default dict) .Title) -}}
    {{- $author_lang := (index ($author | default dict) .Site.Language.Lang) -}}
    {{- $author_name := $author_lang.name.display | default $author.name.display | default .Title -}}
    {{ $title_block = printf `<div class="archive-title author"><h2 class="archive-name">%s%s</h2></div>` (i18n "author_item") $author_name }}
  {{ end }}
{{ end }}

{{ partial "archive-list.html" (dict
  "paginator" $paginator
  "title_block" $title_block
  "show_category_nav" $show_category_nav
  "context" .
) }}
{{ end }}
